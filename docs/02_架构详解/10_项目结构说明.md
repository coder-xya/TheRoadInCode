# é¡¹ç›®ç»“æ„è¯¦è§£

> é¢å‘åˆçº§å¼€å‘è€…çš„ Monorepo é¡¹ç›®ç»“æ„æ•™ç¨‹

## 1. é¡¹ç›®æ€»è§ˆ

### 1.1 ä»€ä¹ˆæ˜¯ Monorepo

Monorepoï¼ˆå•ä¸€ä»£ç ä»“åº“ï¼‰æ˜¯å°†å¤šä¸ªé¡¹ç›®æ”¾åœ¨åŒä¸€ä¸ª Git ä»“åº“ä¸­ç®¡ç†çš„æ–¹å¼ã€‚

**å®˜æ–¹èµ„æº**ï¼š
- [Turborepo æ–‡æ¡£](https://turbo.build/repo/docs)
- [pnpm Workspace æ–‡æ¡£](https://pnpm.io/workspaces)

### 1.2 é¡¹ç›®ç›®å½•æ ‘

```
TheRoadInCode/
â”œâ”€â”€ ğŸ“ apps/                    # åº”ç”¨å±‚ï¼ˆå¯éƒ¨ç½²çš„åº”ç”¨ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ web/                 # Next.js å‰ç«¯åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/         # App Router é¡µé¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx  # æ ¹å¸ƒå±€
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx    # é¦–é¡µ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ globals.css # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ next.config.ts      # Next.js é…ç½®
â”‚   â”‚   â”œâ”€â”€ tailwind.config.ts  # Tailwind é…ç½®
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â””â”€â”€ .env.example
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ api/                 # NestJS åç«¯åº”ç”¨
â”‚       â”œâ”€â”€ ğŸ“ src/
â”‚       â”‚   â”œâ”€â”€ main.ts         # å…¥å£æ–‡ä»¶
â”‚       â”‚   â”œâ”€â”€ app.module.ts   # æ ¹æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ app.controller.ts
â”‚       â”‚   â”œâ”€â”€ app.service.ts
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ nest-cli.json       # NestJS CLI é…ç½®
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â””â”€â”€ .env.example
â”‚
â”œâ”€â”€ ğŸ“ packages/                # å…±äº«åŒ…å±‚
â”‚   â”œâ”€â”€ ğŸ“ database/            # Prisma æ•°æ®åº“åŒ…
â”‚   â”‚   â”œâ”€â”€ ğŸ“ prisma/
â”‚   â”‚   â”‚   â””â”€â”€ schema.prisma   # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts        # Prisma Client å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ shared/              # å…±äº«ç±»å‹å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts        # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts        # å…±äº«ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.ts    # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ utils.ts        # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ typescript-config/   # TypeScript é…ç½®åŒ…
â”‚   â”‚   â”œâ”€â”€ base.json           # åŸºç¡€é…ç½®
â”‚   â”‚   â”œâ”€â”€ nextjs.json         # Next.js ä¸“ç”¨
â”‚   â”‚   â”œâ”€â”€ nestjs.json         # NestJS ä¸“ç”¨
â”‚   â”‚   â”œâ”€â”€ library.json        # åº“ä¸“ç”¨
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ eslint-config/       # ESLint é…ç½®åŒ…
â”‚       â”œâ”€â”€ base.js             # åŸºç¡€è§„åˆ™
â”‚       â”œâ”€â”€ nextjs.js           # Next.js è§„åˆ™
â”‚       â”œâ”€â”€ nestjs.js           # NestJS è§„åˆ™
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“ docker/                  # Docker é…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml      # å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ docker-compose.prod.yml # ç”Ÿäº§ç¯å¢ƒ
â”‚   â”œâ”€â”€ web.Dockerfile          # å‰ç«¯é•œåƒ
â”‚   â””â”€â”€ api.Dockerfile          # åç«¯é•œåƒ
â”‚
â”œâ”€â”€ ğŸ“ docs/                    # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ 01_å‡†å¤‡å·¥ä½œ/
â”‚   â”‚   â”œâ”€â”€ requirements.md     # éœ€æ±‚åˆ†æ
â”‚   â”‚   â”œâ”€â”€ architecture.md     # æŠ€æœ¯æ¶æ„
â”‚   â”‚   â”œâ”€â”€ roadmap.md          # é¡¹ç›®è·¯çº¿å›¾
â”‚   â”‚   â””â”€â”€ tech-comparison.md  # æŠ€æœ¯é€‰å‹å¯¹æ¯”
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ 02_æ¶æ„è¯¦è§£/
â”‚       â”œâ”€â”€ README.md           # ç›®å½•ç´¢å¼•
â”‚       â”œâ”€â”€ 01_pnpmåŒ…ç®¡ç†å™¨.md
â”‚       â”œâ”€â”€ 02_Turborepoæ„å»ºç³»ç»Ÿ.md
â”‚       â”œâ”€â”€ ... (æ›´å¤šæŠ€æœ¯æ–‡æ¡£)
â”‚       â””â”€â”€ 11_é…ç½®æ–‡ä»¶è¯¦è§£.md
â”‚
â”œâ”€â”€ ğŸ“ .husky/                  # Git Hooks
â”‚   â””â”€â”€ pre-commit              # æäº¤å‰æ£€æŸ¥
â”‚
â”œâ”€â”€ package.json                # æ ¹ package.json
â”œâ”€â”€ pnpm-workspace.yaml         # pnpm å·¥ä½œåŒºé…ç½®
â”œâ”€â”€ turbo.json                  # Turborepo é…ç½®
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .prettierrc                 # Prettier é…ç½®
â”œâ”€â”€ .prettierignore
â”œâ”€â”€ .lintstagedrc.js            # lint-staged é…ç½®
â””â”€â”€ README.md
```

---

## 2. ç›®å½•èŒè´£è¯¦è§£

### 2.1 apps/ - åº”ç”¨å±‚

å­˜æ”¾å¯ç‹¬ç«‹éƒ¨ç½²çš„åº”ç”¨ç¨‹åºã€‚

| ç›®å½• | æŠ€æœ¯æ ˆ | èŒè´£ | ç«¯å£ |
|------|--------|------|------|
| `apps/web` | Next.js 15 + React 19 | å‰ç«¯åº”ç”¨ | 3000 |
| `apps/api` | NestJS 10 + Prisma | åç«¯ API | 4000 |

**è®¾è®¡åŸåˆ™**ï¼š
- æ¯ä¸ª app æ˜¯ç‹¬ç«‹çš„å¯éƒ¨ç½²å•å…ƒ
- apps ä¹‹é—´ä¸èƒ½äº’ç›¸ä¾èµ–
- å…±äº«ä»£ç å¿…é¡»æ”¾åœ¨ packages

### 2.2 packages/ - å…±äº«åŒ…å±‚

å­˜æ”¾è¢«å¤šä¸ª apps å¤ç”¨çš„ä»£ç ã€‚

| åŒ…å | ç”¨é€” | è¢«è°ä½¿ç”¨ |
|------|------|----------|
| `@repo/database` | Prisma Client + æ•°æ®åº“ | api |
| `@repo/shared` | å…±äº«ç±»å‹ã€å¸¸é‡ã€å·¥å…· | web, api |
| `@repo/typescript-config` | TS é…ç½® | æ‰€æœ‰åŒ… |
| `@repo/eslint-config` | ESLint è§„åˆ™ | æ‰€æœ‰åŒ… |

**å‘½åè§„èŒƒ**ï¼š
```json
// packages/shared/package.json
{
  "name": "@repo/shared"  // ä½¿ç”¨ @repo å‰ç¼€
}
```

### 2.3 docker/ - å®¹å™¨é…ç½®

| æ–‡ä»¶ | ç¯å¢ƒ | ç”¨é€” |
|------|------|------|
| `docker-compose.yml` | å¼€å‘ | å¯åŠ¨ PostgreSQL + Redis |
| `docker-compose.prod.yml` | ç”Ÿäº§ | å®Œæ•´åº”ç”¨éƒ¨ç½² |
| `web.Dockerfile` | ç”Ÿäº§ | æ„å»ºå‰ç«¯é•œåƒ |
| `api.Dockerfile` | ç”Ÿäº§ | æ„å»ºåç«¯é•œåƒ |

### 2.4 docs/ - æ–‡æ¡£å±‚

```
docs/
â”œâ”€â”€ 01_å‡†å¤‡å·¥ä½œ/     # é¡¹ç›®è§„åˆ’æ–‡æ¡£
â”œâ”€â”€ 02_æ¶æ„è¯¦è§£/     # æŠ€æœ¯æ•™ç¨‹ï¼ˆä½ æ­£åœ¨çœ‹çš„ï¼‰
â”œâ”€â”€ 03_å¼€å‘æŒ‡å—/     # å¼€å‘æµç¨‹ï¼ˆå¾…åˆ›å»ºï¼‰
â””â”€â”€ 04_éƒ¨ç½²è¿ç»´/     # éƒ¨ç½²æ–‡æ¡£ï¼ˆå¾…åˆ›å»ºï¼‰
```

---

## 3. æ–‡ä»¶èŒè´£è¯¦è§£

### 3.1 æ ¹ç›®å½•æ–‡ä»¶

| æ–‡ä»¶ | èŒè´£ | å®˜æ–¹æ–‡æ¡£ |
|------|------|----------|
| `package.json` | æ ¹é¡¹ç›®é…ç½®ã€å…¨å±€è„šæœ¬ | [npm docs](https://docs.npmjs.com/cli/v10/configuring-npm/package-json) |
| `pnpm-workspace.yaml` | å®šä¹‰å·¥ä½œåŒºèŒƒå›´ | [pnpm workspaces](https://pnpm.io/workspaces) |
| `turbo.json` | å®šä¹‰æ„å»ºä»»åŠ¡å’Œç¼“å­˜ | [Turborepo config](https://turbo.build/repo/docs/reference/configuration) |
| `.gitignore` | Git å¿½ç•¥è§„åˆ™ | [Git docs](https://git-scm.com/docs/gitignore) |
| `.prettierrc` | ä»£ç æ ¼å¼åŒ–è§„åˆ™ | [Prettier options](https://prettier.io/docs/en/options.html) |
| `.lintstagedrc.js` | Git æš‚å­˜åŒºæ£€æŸ¥ | [lint-staged](https://github.com/lint-staged/lint-staged) |

### 3.2 apps/web æ–‡ä»¶

| æ–‡ä»¶ | èŒè´£ | å®˜æ–¹æ–‡æ¡£ |
|------|------|----------|
| `next.config.ts` | Next.js é…ç½® | [Next.js config](https://nextjs.org/docs/app/api-reference/next-config-js) |
| `tailwind.config.ts` | Tailwind ä¸»é¢˜æ‰©å±• | [Tailwind config](https://tailwindcss.com/docs/configuration) |
| `postcss.config.mjs` | PostCSS æ’ä»¶ | [PostCSS](https://postcss.org/) |
| `tsconfig.json` | TypeScript é…ç½® | [TSConfig](https://www.typescriptlang.org/tsconfig) |
| `src/app/layout.tsx` | æ ¹å¸ƒå±€ï¼ˆæ‰€æœ‰é¡µé¢å…±äº«ï¼‰ | [Layouts](https://nextjs.org/docs/app/building-your-application/routing/layouts-and-templates) |
| `src/app/page.tsx` | é¦–é¡µç»„ä»¶ | [Pages](https://nextjs.org/docs/app/building-your-application/routing/pages) |
| `src/app/globals.css` | å…¨å±€ CSS + Tailwind | [Tailwind directives](https://tailwindcss.com/docs/functions-and-directives) |

### 3.3 apps/api æ–‡ä»¶

| æ–‡ä»¶ | èŒè´£ | å®˜æ–¹æ–‡æ¡£ |
|------|------|----------|
| `nest-cli.json` | NestJS CLI é…ç½® | [Nest CLI](https://docs.nestjs.com/cli/overview) |
| `tsconfig.json` | TypeScript é…ç½® | [TSConfig](https://www.typescriptlang.org/tsconfig) |
| `src/main.ts` | åº”ç”¨å…¥å£ã€å¯åŠ¨ | [First steps](https://docs.nestjs.com/first-steps) |
| `src/app.module.ts` | æ ¹æ¨¡å— | [Modules](https://docs.nestjs.com/modules) |
| `src/app.controller.ts` | æ ¹æ§åˆ¶å™¨ | [Controllers](https://docs.nestjs.com/controllers) |
| `src/app.service.ts` | æ ¹æœåŠ¡ | [Providers](https://docs.nestjs.com/providers) |

### 3.4 packages/database æ–‡ä»¶

| æ–‡ä»¶ | èŒè´£ | å®˜æ–¹æ–‡æ¡£ |
|------|------|----------|
| `prisma/schema.prisma` | æ•°æ®æ¨¡å‹å®šä¹‰ | [Prisma Schema](https://www.prisma.io/docs/concepts/components/prisma-schema) |
| `src/index.ts` | Prisma Client å¯¼å‡º | [Prisma Client](https://www.prisma.io/docs/concepts/components/prisma-client) |

---

## 4. æ•°æ®æµå‘å›¾

### 4.1 è¯·æ±‚æµå‘

```
ç”¨æˆ·æµè§ˆå™¨
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Next.js (web)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Server      â”‚    â”‚ Client           â”‚    â”‚
â”‚  â”‚ Components  â”‚    â”‚ Components       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚
          â”‚ fetch()            â”‚ fetch()
          â”‚                    â”‚
          â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                NestJS (api)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Controller â”‚â†’ â”‚ Service â”‚â†’ â”‚  Prisma   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   PostgreSQL     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 åŒ…ä¾èµ–å…³ç³»

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ @repo/typescript-   â”‚
                    â”‚       config        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ extends
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                   â”‚                   â”‚
           â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   apps/web   â”‚   â”‚   apps/api   â”‚   â”‚  packages/*  â”‚
    â”‚  (Next.js)   â”‚   â”‚  (NestJS)    â”‚   â”‚   (libs)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                  â”‚
           â”‚  imports         â”‚  imports
           â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         @repo/shared             â”‚
    â”‚  (types, constants, utils)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ imports (api only)
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         @repo/database           â”‚
    â”‚     (Prisma Client + Schema)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. å¸¸ç”¨æ“ä½œè·¯å¾„

### 5.0 å‰åç«¯è”è°ƒï¼ˆæœ€å¸¸è§çš„ 3 ç§æ–¹å¼ï¼‰

1. **Next.js Server Component ç›´è¿ NestJS**ï¼šé€‚åˆéœ€è¦ cookie/éšè—åç«¯åœ°å€çš„è¯·æ±‚
2. **Next.js rewrites ä»£ç†åˆ° NestJS**ï¼šæµè§ˆå™¨è¯·æ±‚åŒæº `/api/v1/*`ï¼Œå¼€å‘ä½“éªŒæœ€å¥½
3. **Next.js Route Handler åš BFF**ï¼šå‰ç«¯åšâ€œæ¥å£èšåˆå±‚â€ï¼Œå¯¹åç«¯è§£è€¦

å¯¹åº”çš„ç»†èŠ‚å¯ä»¥åœ¨ [NextJSæ¡†æ¶](./04_NextJSæ¡†æ¶.md) å’Œ [é…ç½®æ–‡ä»¶è¯¦è§£](./11_é…ç½®æ–‡ä»¶è¯¦è§£.md) é‡Œå¯¹ç…§çœ‹ã€‚

### 5.1 æ–°å¢åŠŸèƒ½çš„æ–‡ä»¶ä½ç½®

| éœ€æ±‚ | æ“ä½œä½ç½® |
|------|----------|
| æ–°å¢é¡µé¢ | `apps/web/src/app/[è·¯ç”±]/page.tsx` |
| æ–°å¢ React ç»„ä»¶ | `apps/web/src/components/` |
| æ–°å¢ API æ¥å£ | `apps/api/src/modules/[æ¨¡å—]/` |
| æ–°å¢æ•°æ®è¡¨ | `packages/database/prisma/schema.prisma` |
| æ–°å¢å…±äº«ç±»å‹ | `packages/shared/src/types.ts` |
| æ–°å¢å·¥å…·å‡½æ•° | `packages/shared/src/utils.ts` |

### 5.2 ä¿®æ”¹é…ç½®çš„æ–‡ä»¶ä½ç½®

| éœ€æ±‚ | æ“ä½œä½ç½® |
|------|----------|
| ä¿®æ”¹æ„å»ºè¡Œä¸º | `turbo.json` |
| ä¿®æ”¹ TS é…ç½® | `packages/typescript-config/*.json` |
| ä¿®æ”¹ ESLint è§„åˆ™ | `packages/eslint-config/*.js` |
| ä¿®æ”¹ Prettier æ ¼å¼ | `.prettierrc` |
| ä¿®æ”¹æ•°æ®åº“è¿æ¥ | `apps/api/.env` æˆ– `packages/database/.env` |
| ä¿®æ”¹ç«¯å£ | å„åº”ç”¨çš„ `.env` æˆ–å¯åŠ¨è„šæœ¬ |
| ä¿®æ”¹å‰ç«¯è¯·æ±‚åç«¯åœ°å€ | `apps/web/.env.local`ï¼ˆä¾‹å¦‚ `NEXT_PUBLIC_API_URL`ï¼‰ |

### 5.3 è°ƒè¯•é—®é¢˜çš„æŸ¥çœ‹ä½ç½®

| é—®é¢˜ | æŸ¥çœ‹ä½ç½® |
|------|----------|
| å‰ç«¯æ„å»ºé”™è¯¯ | `apps/web/.next/` æ—¥å¿— |
| åç«¯è¿è¡Œé”™è¯¯ | æ§åˆ¶å° + `apps/api/dist/` |
| æ•°æ®åº“é—®é¢˜ | `docker compose logs db` |
| ç±»å‹é”™è¯¯ | æ£€æŸ¥ `packages/shared/src/types.ts` |
| ä¾èµ–é—®é¢˜ | `pnpm-lock.yaml` + å„ `package.json` |

---

## 6. ç›®å½•è§„èŒƒ

### 6.1 å‘½åè§„èŒƒ

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| ç›®å½• | kebab-case | `user-profile/` |
| React ç»„ä»¶æ–‡ä»¶ | PascalCase | `UserCard.tsx` |
| å·¥å…·å‡½æ•°æ–‡ä»¶ | camelCase | `formatDate.ts` |
| ç±»å‹æ–‡ä»¶ | camelCase | `user.types.ts` |
| å¸¸é‡æ–‡ä»¶ | camelCase | `apiEndpoints.ts` |
| NestJS æ¨¡å— | kebab-case | `users/users.module.ts` |

### 6.2 å¯¼å…¥é¡ºåº

```typescript
// 1. Node.js å†…ç½®æ¨¡å—
import path from 'path';

// 2. å¤–éƒ¨ä¾èµ–
import { Injectable } from '@nestjs/common';
import { PrismaClient } from '@prisma/client';

// 3. å†…éƒ¨å…±äº«åŒ…
import { UserDTO } from '@repo/shared';
import { db } from '@repo/database';

// 4. ç›¸å¯¹è·¯å¾„å¯¼å…¥
import { UserService } from './user.service';
import { formatDate } from '../utils';
```

---

## 7. æ‰©å±•æŒ‡å—

### 7.1 æ·»åŠ æ–°çš„å…±äº«åŒ…

```bash
# 1. åˆ›å»ºç›®å½•
mkdir -p packages/new-package/src

# 2. åˆå§‹åŒ– package.json
cd packages/new-package
pnpm init

# 3. è®¾ç½®åŒ…å
# ç¼–è¾‘ package.jsonï¼Œè®¾ç½® "name": "@repo/new-package"

# 4. åœ¨æ ¹ç›®å½•å®‰è£…
cd ../..
pnpm install
```

### 7.2 æ·»åŠ æ–°çš„åº”ç”¨

```bash
# 1. ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»º
cd apps
npx create-next-app@latest admin  # ç®¡ç†åå°
# æˆ–
nest new cms  # å†…å®¹ç®¡ç†

# 2. é…ç½® workspace ä¾èµ–
# ç¼–è¾‘ apps/admin/package.jsonï¼Œæ·»åŠ ï¼š
# "@repo/shared": "workspace:*"

# 3. å®‰è£…ä¾èµ–
cd ../..
pnpm install
```

---

## 8. æ€»ç»“

### è®°ä½è¿™ä¸ªæ ¸å¿ƒç»“æ„

```
TheRoadInCode/
â”œâ”€â”€ apps/           # å¯éƒ¨ç½²çš„åº”ç”¨ï¼ˆweb, apiï¼‰
â”œâ”€â”€ packages/       # å…±äº«ä»£ç ï¼ˆdatabase, shared, configsï¼‰
â”œâ”€â”€ docker/         # å®¹å™¨é…ç½®
â”œâ”€â”€ docs/           # æ–‡æ¡£
â””â”€â”€ é…ç½®æ–‡ä»¶        # turbo.json, pnpm-workspace.yaml, etc.
```

### ä¸‰æ¡é»„é‡‘æ³•åˆ™

1. **apps ä¹‹é—´ä¸èƒ½äº’ç›¸ä¾èµ–**ï¼šå…±äº«ä»£ç å¿…é¡»æ”¾ packages
2. **packages æ˜¯å•å‘ä¾èµ–**ï¼šåªèƒ½è¢« apps å¼•ç”¨ï¼Œä¸èƒ½åè¿‡æ¥
3. **é…ç½®é›†ä¸­ç®¡ç†**ï¼šTypeScriptã€ESLint é…ç½®æ”¾åœ¨ä¸“é—¨çš„ packages

**ä¸€å¥è¯æ€»ç»“**ï¼šMonorepo è®©å‰åç«¯å…±äº«ä»£ç ï¼ŒåŒæ—¶ä¿æŒç‹¬ç«‹éƒ¨ç½²çš„èƒ½åŠ›ã€‚
